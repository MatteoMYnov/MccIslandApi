<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>{{.Name}} | Profile</title>
        <link rel="stylesheet" href="../styles/menu.css?v=1.0">
        <link rel="stylesheet" href="../styles/cos.css?v=1.0">
        <link rel="stylesheet" href="../styles/tippy.css?v=1.0">
        <link rel="stylesheet" href="../styles/loading.css?v=1.0">
        <link id="favicon" rel="icon" href="https://mc-heads.net/avatar/{{.Name}}" type="image/png">
    </head>
    <body style="--bg-image-url: url('../img/utilities{{if .BackgroundUUID}}/perplayers/{{.BackgroundUUID}}/bg.png{{else}}/bg.png{{end}}');">
        <div id="bgdark"></div>
        <header class="navbar" style="background-color: {{if .BackgroundUUID}}{{.BackgroundNavbar}}; border-bottom: 3px solid {{.BackgroundLight}}{{else}}#6E2F2F; border-bottom: 3px solid #B7573A{{end}};">
            <nav>
                <ul>
                    <li>
                        <form action="/{{.Lang}}/menu" method="get" class="input-group">
                            <img src="../img/utilities/refresh.png" data-tippy-content="Random Player" class="refresh no-select cursor" onclick="refreshSearch()" draggable="false">
                            <input type="text" name="q" placeholder="Find Player" class="find-player" id="playerInput" required style="background-color: {{if .BackgroundUUID}}{{.BackgroundDark}}{{else}}#491F1F{{end}};">
                            <button class="show-button cursor" type="submit" style="background-color: {{if .BackgroundUUID}}{{.BackgroundDark}}{{else}}#491F1F{{end}};">Show</button>
                        </form>
                    </li>
                    <li class="page-cath mc-font" style="background-color: {{if .BackgroundUUID}}{{.BackgroundDark}}{{else}}#491F1F{{end}};">Menu</li>
                </ul>
            </nav>
        </header>
        <main>
            <!-- Conteneur général pour les cartes -->
            <div class="stats-container">
                <!-- Player Card -->
                <div class="player-card" id="playerCard">
                    <div class="profile-info">
                        <img id="profileImage" src="https://mc-heads.net/head/{{.Name}}" alt="Player Image" class="profile-image no-select" draggable="false">
                        <p id="playerName" class="{{.PlayerClass}}">{{.Name}}</p>
                        {{if .BackgroundUUID}}
                            <img src="../img/mcc/utilities/theme.png" alt="Player Using Theme" class="theme-image no-select" data-tippy-content='{{index .Translations .Lang "asked_for_theme"}}' data-theme="theme" draggable="false">
                        {{end}}
                    </div>
                </div>
                <!-- Minecraft Stats Card -->
                <div class="minecraftstats-card" id="minecraftStatsCard">
                    <div class="stats-header">
                        <p class="playerRank mc-font" data-tippy-content='{{if eq .PlayerRank -1}}{{index .Translations .Lang "no_classement"}}{{else}}Rank #{{.PlayerRank}} Database classement{{end}}'>
                            {{if eq .PlayerRank -1}}
                                N/A
                            {{else}}
                                <span class="rank-link cursor" onclick="redirectToRankPage('{{.PlayerRankPage}}')">#{{.PlayerRank}}</span>
                            {{end}}
                        </p>                            
                        <img src="../img/utilities/minecrafticon.png" alt="Minecraft Icon" class="minecraft-icon" draggable="false">
                        <h2>Minecraft Capes</h2>
                    </div>  
                    <div class="stats-body">
                        {{if .ImageURLs}}    
                            <div class="cape-hole">
                                {{range .ImageURLs}}
                                    <div class="cape-container">
                                        <img src="{{.URL}}" onerror="this.onerror=null; this.src='../img/capes/NoTexture.png';" alt="Cape Image" class="cape-image no-select cursor {{.Class}}" data-id="using-modal" data-name="{{.CapeName}}" draggable="false">
                                        <p class="cape-title mc-font">{{.Title}}</p>
                                    </div>
                                {{end}}
                            </div>
                        {{else}}
                            <p class="no-cape">{{index .Translations .Lang "no_cape"}}</p>
                        {{end}}
                    </div>
                </div>  
                <!-- Badge Card -->
                {{if .BadgeURLs}}
                <div class="badge-card" id="badgeCard">
                    <div class="stats-header">
                        <img src="../img/utilities/badgesicon.png" alt="Badge Icon" class="badge-icon" draggable="false">
                        <h2>Badges</h2>
                    </div>
                    <div class="stats-body">
                        {{range .BadgeURLs}}
                            <img src="{{.URL}}" data-name="{{.BadgeName}}" alt="Badge Image" class="badge-image cursor no-select {{.Class}}" data-id="using-modal {{.BadgeName}}" draggable="false">
                        {{end}}
                    </div>
                </div>
                {{end}}
                <div class="skin-3d no-select" id="PlayerSkin">
                    <div class="stats-header">
                        <img src="https://nmsr.nickac.dev/fullbody/{{.Name}}" style="width: 350px; height: auto;" draggable="false">
                    </div>
                </div>
                <!-- MCC Stats Card -->
                <div class="mccstats-card" id="mccStatsCard">
                    <div class="stats-header">
                        <img src="../img/utilities/mccicon.png" alt="MCC Icon" class="mcc-icon" draggable="false">
                        <h2>MCC Island Stats</h2>
                        <img src="../img/utilities/i.png" data-tippy-content="Api Informations" class="infos no-select cursor" data-id="using-modal" data-name="mcc-infos" draggable="false">
                    </div>
                    <div class="stats-body">
                        <div class="mcc-case mcc-case1">
                            <div class="mcc-header">
                                <img class="mcc-image mcc-rank no-select" src="../img/mcc/ranks/{{if .MccRank}}{{.MccRank}}{{else}}PLAYER{{end}}.png" data-tippy-content="{{if .MccRank}}{{.MccRank}}{{else}}PLAYER{{end}}" draggable="false">
                                <p class="mcc-playername mc-font">{{.Name}}</p>
                            </div>
                            <div class="mcc-image mcc-crown">
                                <img class="mcc-actualcrown no-select" src="../img/mcc/crowns/{{if .Evolution}}{{.Evolution}}{{else}}0{{end}}.png" data-tippy-content="Crown Level" draggable="false">
                                <p class="mcc-actualcrownlevel mc-font">{{.CrownLevel}}</p>
                                <!-- Progress Bar -->
                                <progress class="mcc-crownbar mcc-crown{{.Evolution}}" value="{{.CrownObtained}}" max="{{.CrownObtainable}}"></progress>
                                <p class="mcc-futurcrownlevel mc-font">{{.CrownLevelplus1}}</p>
                            </div>
                            <div class="mcc-pourcentprogress">
                                <p class="mcc-crownprogress mc-font">Progress: </p><p class="mcc-crownprogresspourcent mc-font">{{.CrownPourcentage}}%</p><p class="mcc-crownprogress mc-font"> ({{.CrownObtained}}/{{.CrownObtainable}})</p>
                            </div>
                            <div class="mcc-image mcc-crown">
                                <img class="mcc-actualcrown no-select" src="../img/mcc/crowns/fishing{{if .FishingEvolution}}{{.FishingEvolution}}{{else}}0{{end}}.png" data-tippy-content="Fishing Level" draggable="false">
                                <p class="mcc-actualcrownlevel mc-font">{{.FishingLevel}}</p>
                                <!-- Progress Bar -->
                                <progress class="mcc-crownbar mcc-crown{{.FishingEvolution}}" value="{{.FishingObtained}}" max="{{.FishingObtainable}}"></progress>
                                <p class="mcc-futurcrownlevel mc-font">{{.FishingLevelplus1}}</p>
                            </div>
                            <div class="mcc-pourcentprogress">
                                <p class="mcc-crownprogress mc-font">Progress: </p><p class="mcc-crownprogresspourcent mc-font">{{.FishingPourcentage}}%</p><p class="mcc-crownprogress mc-font"> ({{.FishingObtained}}/{{.FishingObtainable}})</p>
                            </div>
                        </div> 
                        <div class="mcc-bigcase">
                            <div class="mcc-case mcc-case2">
                                <h3>Wallet</h3>
                                <div class="mcc-list-item mc-font">
                                    <img class="no-select" src="../img/mcc/wallet/coins.png" data-tippy-content="Coins" draggable="false">
                                    <p class="text">{{.CurrencyCoins}}</p>
                                </div>
                                <div class="mcc-list-item mc-font">
                                    <img class="no-select" src="../img/mcc/wallet/silver.png " data-tippy-content="Silver" draggable="false">
                                    <p class="text">{{.CurrencySilver}}</p>
                                </div>
                                <div class="mcc-list-item mc-font">
                                    <img class="no-select" src="../img/mcc/wallet/material_dust.png" data-tippy-content="Dust" draggable="false">
                                    <p class="text">{{.CurrencyMaterialDust}}</p>
                                </div>
                                <div class="mcc-list-item mc-font">
                                    <img class="no-select" src="../img/mcc/wallet/royal_reputation.png" data-tippy-content="Royal Reputation" draggable="false">
                                    <p class="text">{{.CurrencyRoyalRep}}</p>
                                </div>
                                <div class="mcc-list-item mc-font">
                                    <img class="no-select" src="../img/mcc/wallet/anglr_token.png" data-tippy-content="Angler Token" draggable="false">
                                    <p class="text">{{.CurrencyAnglrTokens}}</p>
                                </div>
                            </div>
                            <div class="mcc-case mcc-case3">
                                <h3>Trophies</h3>
                                <div class="mcc-list-item mc-font">
                                    <img class="no-select" src="../img/mcc/trophies/total_trophies.png" data-tippy-content="Total Trophies" draggable="false">
                                    <p class="text">{{.TotalTrophies}}</p>
                                    <p class="text-gray"> /{{.MaxTotalTrophies}}</p>
                                </div>
                                <div class="mcc-list-item mc-font">
                                    <img class="no-select" src="../img/mcc/trophies/skill_trophies.png" data-tippy-content="Skill Trophies" draggable="false">
                                    <p class="text">{{.SKILLTrophies}}</p>
                                    <p class="text-gray"> /{{.MaxSKILLTrophies}}</p>
                                </div>
                                <div class="mcc-list-item mc-font">
                                    <img class="no-select" src="../img/mcc/trophies/style_trophies.png" data-tippy-content="Style Trophies" draggable="false">
                                    <p class="text">{{.STYLETrophies}}</p>
                                    <p class="text-gray"> /{{.MaxSTYLETrophies}}</p>
                                </div>
                                <div class="mcc-list-item mc-font">
                                    <img class="no-select" src="../img/mcc/trophies/angler_trophies.png" data-tippy-content="Angler Trophies" draggable="false">
                                    <p class="text">{{.ANGLERTrophies}}</p>
                                    <p class="text-gray"> /{{.MaxANGLERTrophies}}</p>
                                </div>
                                <div class="mcc-list-item mc-font">
                                    <img class="no-select" src="../img/mcc/trophies/bonus_trophies.png" data-tippy-content="Bonus Trophies" draggable="false">
                                    <p class="text">{{.BonusTrophies}}</p>
                                </div>
                            </div>
                        </div>
                        <div class="rolls-card">
                            <!-- Friends Roll -->
                            <div class="roll-card friends-card" id="friendsCard">
                                <div class="roll-header friends-header cursor" onclick="toggleRoll('friendsBody', 'friends-arrow')">
                                    <img src="../img/mcc/utilities/friends.png" alt="Friends Icon" class="roll-icon no-select" draggable="false">
                                    <h2>{{index .Translations .Lang "roll-friends"}}</h2>
                                    <img id="friends-arrow" src="../img/mcc/utilities/arrow-left.png" alt="Arrow" class="arrow no-select" draggable="false">
                                </div>
                                <div class="roll-body" id="friendsBody">
                                    <div class="interfriends-body">
                                        {{if .Friends}} 
                                            {{range .Friends}}
                                                <div class="friend-card cursor" data-playername="{{.Username}}" onclick="searchPlayer(this)">
                                                    <div class="friend-info">
                                                        <div class="friend-head">
                                                            <img src="https://mc-heads.net/head/{{.Username}}" class="friends-icon no-select" draggable="false">
                                                            <div class="online-status {{if .Online}}online{{else}}offline{{end}}" data-tippy-content="{{if .Online}}Online{{else}}Offline{{end}}"></div>
                                                        </div>
                                                        <img src="../img/mcc/crowns/{{if .CrownLevel.Evolution}}{{.CrownLevel.Evolution}}{{else}}0{{end}}.png" class="friends-icon no-select" data-tippy-content="{{.CrownLevel.Level}}" draggable="false">
                                                        <img src="../img/mcc/ranks/{{if .Ranks}}{{.Ranks}}{{else}}PLAYER{{end}}.png" class="friends-icon no-select" data-tippy-content="{{if .Ranks}}{{.Ranks}}{{else}}PLAYER{{end}}" draggable="false">
                                                        <p class="">{{.Username}}</p>
                                                    </div>
                                                </div>
                                            {{end}}
                                        {{else}}
                                            <p>{{index .Translations .Lang "no_friend"}}</p>
                                        {{end}}
                                    </div>
                                </div>                           
                            </div>
                            <!-- MccGames Roll-->
                            <div class="roll-card mccgames-card" id="MccGamesCard">
                                <div class="roll-header rollstat-header cursor" onclick="toggleRoll('MccGamesBody', 'mccgames-arrow')">
                                    <img src="../img/mcc/trophies/total_trophies.png" alt="MccGames Icon" class="roll-icon no-select" draggable="false">
                                    <h2>{{index .Translations .Lang "roll-stats"}}</h2>
                                    <img id="mccgames-arrow" src="../img/mcc/utilities/arrow-left.png" alt="Arrow" class="arrow no-select" draggable="false">
                                </div>
                                <div class="roll-body" id="MccGamesBody">
                                    {{if ne .GameStats.TotalGames 0}} <!-- Teste si TotalGames est différent de 0 -->
                                        <div class="upcath-body">
                                            <div class="subcath-body">
                                                <div class="subcath-header mc-font">
                                                    <img src="../img/mcc/games/games.png" class="roll-icon no-select" draggable="false">
                                                    <p style="color: white;">General Stats</p>
                                                </div> 
                                                <div class="general-stats">
                                                    <div id="GamesGraph" class="gamesgraph"></div>
                                                    <div class="graph-numbers mc-font">
                                                        <p style="color: white;">Games Played</p>
                                                        <div class="graph-games-played">
                                                            <div class="line-content">
                                                                <img src="../img/mcc/games/sky-battle.png" class="no-select" data-tippy-content="Sky Battle" draggable="false">
                                                                <p class="graph-numbers-content">- {{.GameStats.SBGames}}</p>
                                                            </div>
                                                            <div class="line-content">
                                                                <img src="../img/mcc/games/battle-box.png" class="no-select" data-tippy-content="Battle Box" draggable="false">
                                                                <p class="graph-numbers-content">- {{.GameStats.BBGames}}</p>
                                                            </div>
                                                            <div class="line-content">
                                                                <img src="../img/mcc/games/tgttos.png" class="no-select" data-tippy-content="TGTTOS" draggable="false">
                                                                <p class="graph-numbers-content">- {{.GameStats.TGTTOSGames}}</p>
                                                            </div>
                                                            <div class="line-content">
                                                                <img src="../img/mcc/games/hole-in-the-wall.png" class="no-select" data-tippy-content="Hole in the Wall" draggable="false">
                                                                <p class="graph-numbers-content">- {{.GameStats.HITWGames}}</p>
                                                            </div>
                                                            <div class="line-content">
                                                                <img src="../img/mcc/games/rocket-spleef.png" class="no-select" data-tippy-content="Rocket Spleef Rush" draggable="false">
                                                                <p class="graph-numbers-content">- {{.GameStats.RSGames}}</p>
                                                            </div>
                                                            <div class="line-content">
                                                                <img src="../img/mcc/games/dynaball.png" class="no-select" data-tippy-content="Dynaball" draggable="false">
                                                                <p class="graph-numbers-content">- {{.GameStats.DBGames}}</p>
                                                            </div>
                                                            <div class="line-content">
                                                                <img src="../img/mcc/games/pws.png" class="no-select" data-tippy-content="Parkour Warrior Survivor" draggable="false">
                                                                <p class="graph-numbers-content">- {{.GameStats.PWSGames}}</p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="games-stats">
                                                <div class="subcath-body2">
                                                    <div class="subcath-header mc-font">
                                                        <div class="subcath-header-content">
                                                            <img src="../img/mcc/games/sky-battle.png" class="roll-icon no-select" draggable="false">
                                                            <p style="color: white;">Sky-Battle Stats</p>
                                                        </div>
                                                    </div>
                                                    <div class="general-stats">
                                                        <div class="subcath-case">
                                                            <div class="line-content2">
                                                                <img src="../img/mcc/games/stats/win.png" class="no-select" data-tippy-content="Wins" draggable="false">
                                                                <p class="mc-font color-white">Wins: </p>
                                                                <p class="mc-font">{{.GameStats.SB_Wins}}</p>
                                                            </div>
                                                            <div class="line-content2">
                                                                <img src="../img/mcc/games/stats/lose.png" class="no-select" data-tippy-content="Loses" draggable="false">
                                                                <p class="mc-font color-white">Loses: </p>
                                                                <p class="mc-font">{{.GameStats.SB_Loses}}</p>
                                                            </div>
                                                            <div class="line-content2">
                                                                <img src="../img/mcc/games/stats/{{if ge .GameStats.SB_WLR 0.125}}up{{else}}down{{end}}.png" class="no-select" data-tippy-content="(Wins per Lose) Average - 0.125" draggable="false">
                                                                <p class="mc-font color-white">WLR: </p>
                                                                <p class="mc-font">({{.GameStats.SB_WLR}})</p>
                                                            </div>
                                                        </div>
                                                        <div class="subcath-case">
                                                            <div class="line-content2">
                                                                <img src="../img/mcc/games/stats/kill.png" class="no-select" data-tippy-content="Kills" draggable="false">
                                                                <p class="mc-font color-white">Kills: </p>
                                                                <p class="mc-font">{{.GameStats.SB_Kills}}</p>
                                                            </div>
                                                            <div class="line-content2">
                                                                <img src="../img/mcc/games/stats/death.png" class="no-select" data-tippy-content="Deaths" draggable="false">
                                                                <p class="mc-font color-white">Deaths: </p>
                                                                <p class="mc-font">{{.GameStats.SB_Deaths}}</p>
                                                            </div>
                                                            <div class="line-content2">
                                                                <img src="../img/mcc/games/stats/{{if ge .GameStats.SB_KDR 0.9}}up{{else}}down{{end}}.png" class="no-select" data-tippy-content="(Kills per Death) Average - 0.9" draggable="false">
                                                                <p class="mc-font color-white">KDR: </p>
                                                                <p class="mc-font">({{.GameStats.SB_KDR}})</p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="subcath-body2">
                                                    <div class="subcath-header mc-font">
                                                        <div class="subcath-header-content">
                                                            <img src="../img/mcc/games/battle-box.png" class="roll-icon no-select" draggable="false">
                                                            <p style="color: white;">Battle-Box Stats</p>
                                                        </div>
                                                    </div>
                                                    <div class="general-stats">
                                                        <div class="subcath-case">
                                                            <div class="line-content2">
                                                                <img src="../img/mcc/games/stats/win.png" class="no-select" data-tippy-content="Wins" draggable="false">
                                                                <p class="mc-font color-white">Wins: </p>
                                                                <p class="mc-font">{{.GameStats.BB_Wins}}</p>
                                                            </div>
                                                            <div class="line-content2">
                                                                <img src="../img/mcc/games/stats/lose.png" class="no-select" data-tippy-content="Loses" draggable="false">
                                                                <p class="mc-font color-white">Loses: </p>
                                                                <p class="mc-font">{{.GameStats.BB_Loses}}</p>
                                                            </div>
                                                            <div class="line-content2">
                                                                <img src="../img/mcc/games/stats/{{if ge .GameStats.BB_WLR 0.125}}up{{else}}down{{end}}.png" class="no-select" data-tippy-content="(Wins per Lose) Average - 0.125" draggable="false">
                                                                <p class="mc-font color-white">WLR: </p>
                                                                <p class="mc-font">({{.GameStats.BB_WLR}})</p>
                                                            </div>
                                                        </div>
                                                        <div class="subcath-case">
                                                            <div class="line-content2">
                                                                <img src="../img/mcc/games/stats/kill.png" class="no-select" data-tippy-content="Kills" draggable="false">
                                                                <p class="mc-font color-white">Kills: </p>
                                                                <p class="mc-font">{{.GameStats.BB_Kills}}</p>
                                                            </div>
                                                            <div class="line-content2">
                                                                <img src="../img/mcc/games/stats/death.png" class="no-select" data-tippy-content="Deaths" draggable="false">
                                                                <p class="mc-font color-white">Deaths: </p>
                                                                <p class="mc-font">{{.GameStats.BB_Deaths}}</p>
                                                            </div>
                                                            <div class="line-content2">
                                                                <img src="../img/mcc/games/stats/{{if ge .GameStats.BB_KDR 1.0}}up{{else}}down{{end}}.png" class="no-select" data-tippy-content="(Kills per Death) Average - 1.0" draggable="false">
                                                                <p class="mc-font color-white">KDR: </p>
                                                                <p class="mc-font">({{.GameStats.BB_KDR}})</p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="subcath-body2">
                                                    <div class="subcath-header mc-font">
                                                        <div class="subcath-header-content">
                                                            <img src="../img/mcc/games/tgttos.png" class="roll-icon no-select" draggable="false">
                                                            <p style="color: white;">TGTTOS Stats</p>
                                                        </div>
                                                    </div> 
                                                    <div class="general-stats">
                                                        <div class="subcath-case">
                                                            <div class="line-content2">
                                                                <img src="../img/mcc/games/stats/win.png" class="no-select" data-tippy-content="Wins" draggable="false">
                                                                <p class="mc-font color-white">Wins: </p>
                                                                <p class="mc-font">{{.GameStats.TGTTOS_Wins}}</p>
                                                            </div>
                                                            <div class="line-content2">
                                                                <img src="../img/mcc/games/stats/lose.png" class="no-select" data-tippy-content="Loses" draggable="false">
                                                                <p class="mc-font color-white">Loses: </p>
                                                                <p class="mc-font">{{.GameStats.TGTTOS_Loses}}</p>
                                                            </div>
                                                            <div class="line-content2">
                                                                <img src="../img/mcc/games/stats/{{if ge .GameStats.TGTTOS_WLR 0.05}}up{{else}}down{{end}}.png" class="no-select" data-tippy-content="(Wins per Lose) Average - 0.05" draggable="false">
                                                                <p class="mc-font color-white">WLR: </p>
                                                                <p class="mc-font">({{.GameStats.TGTTOS_WLR}})</p>
                                                            </div>
                                                        </div>
                                                        <div class="subcath-case">
                                                            <div class="line-content2">
                                                                <img src="../img/mcc/games/tgttos.png" class="no-select" data-tippy-content="Chickens Punched" draggable="false">
                                                                <p class="mc-font color-white">Chicks: </p>
                                                                <p class="mc-font">{{.GameStats.TGTTOS_Chicks}}</p>
                                                            </div>
                                                            <div class="line-content2">
                                                                <img src="../img/mcc/games/games.png" class="no-select" data-tippy-content="Games" draggable="false">
                                                                <p class="mc-font color-white">Games: </p>
                                                                <p class="mc-font">{{.GameStats.TGTTOSGames}}</p>
                                                            </div>
                                                            <div class="line-content2">
                                                                <img src="../img/mcc/games/stats/{{if ge .GameStats.TGTTOS_CGR 2.8}}up{{else}}down{{end}}.png" class="no-select" data-tippy-content="(Chicks per Game) Average - 2.8" draggable="false">
                                                                <p class="mc-font color-white">CGR: </p>
                                                                <p class="mc-font">({{.GameStats.TGTTOS_CGR}})</p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="subcath-body2">
                                                    <div class="subcath-header mc-font">
                                                        <div class="subcath-header-content">
                                                            <img src="../img/mcc/games/hole-in-the-wall.png" class="roll-icon no-select" draggable="false">
                                                            <p style="color: white;">Hole-In-The-Wall Stats</p>
                                                        </div>
                                                    </div> 
                                                    <div class="general-stats">
                                                        <div class="subcath-case">
                                                            <div class="line-content2">
                                                                <img src="../img/mcc/games/stats/win.png" class="no-select" data-tippy-content="Wins" draggable="false">
                                                                <p class="mc-font color-white">Wins: </p>
                                                                <p class="mc-font">{{.GameStats.HITW_Wins}}</p>
                                                            </div>
                                                            <div class="line-content2">
                                                                <img src="../img/mcc/games/stats/lose.png" class="no-select" data-tippy-content="Loses" draggable="false">
                                                                <p class="mc-font color-white">Loses: </p>
                                                                <p class="mc-font">{{.GameStats.HITW_Loses}}</p>
                                                            </div>
                                                            <div class="line-content2">
                                                                <img src="../img/mcc/games/stats/{{if ge .GameStats.HITW_WLR 0.1}}up{{else}}down{{end}}.png" class="no-select" data-tippy-content="(Wins per Lose) Average - 0.1" draggable="false">
                                                                <p class="mc-font color-white">WLR: </p>
                                                                <p class="mc-font">({{.GameStats.HITW_WLR}})</p>
                                                            </div>
                                                        </div>
                                                        <div class="subcath-case">
                                                            <div class="line-content2">
                                                                <img src="../img/mcc/games/hole-in-the-wall.png" class="no-select" data-tippy-content="Walls Dodged" draggable="false">
                                                                <p class="mc-font color-white">Walls: </p>
                                                                <p class="mc-font">{{.GameStats.HITW_Wallsdodged}}</p>
                                                            </div>
                                                            <div class="line-content2">
                                                                <img src="../img/mcc/games/games.png" class="no-select" data-tippy-content="Games" draggable="false">
                                                                <p class="mc-font color-white">Games: </p>
                                                                <p class="mc-font">{{.GameStats.HITWGames}}</p>
                                                            </div>
                                                            <div class="line-content2">
                                                                <img src="../img/mcc/games/stats/{{if ge .GameStats.HITW_WGR 12.0}}up{{else}}down{{end}}.png" class="no-select" data-tippy-content="(Wall per Game) Average - 12.0" draggable="false">
                                                                <p class="mc-font color-white">WGR: </p>
                                                                <p class="mc-font">({{.GameStats.HITW_WGR}})</p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="subcath-body2">
                                                    <div class="subcath-header mc-font">
                                                        <div class="subcath-header-content">
                                                            <img src="../img/mcc/games/rocket-spleef.png" class="roll-icon no-select" draggable="false">
                                                            <p style="color: white;">Rocket-Spleef-Rush Stats</p>
                                                        </div>
                                                    </div> 
                                                    <div class="general-stats">
                                                        <div class="subcath-case">
                                                            <div class="line-content2">
                                                                <img src="../img/mcc/games/stats/win.png" class="no-select" data-tippy-content="Wins" draggable="false">
                                                                <p class="mc-font color-white">Wins: </p>
                                                                <p class="mc-font">{{.GameStats.RS_Wins}}</p>
                                                            </div>
                                                            <div class="line-content2">
                                                                <img src="../img/mcc/games/stats/lose.png" class="no-select" data-tippy-content="Loses" draggable="false">
                                                                <p class="mc-font color-white">Loses: </p>
                                                                <p class="mc-font">{{.GameStats.RS_Loses}}</p>
                                                            </div>
                                                            <div class="line-content2">
                                                                <img src="../img/mcc/games/stats/{{if ge .GameStats.RS_WLR 0.1}}up{{else}}down{{end}}.png" class="no-select" data-tippy-content="(Wins per Lose) Average - 0.1" draggable="false">
                                                                <p class="mc-font color-white">WLR: </p>
                                                                <p class="mc-font">({{.GameStats.RS_WLR}})</p>
                                                            </div>
                                                        </div>
                                                        <div class="subcath-case">
                                                            <div class="line-content2">
                                                                <img src="../img/mcc/games/stats/kill.png" class="no-select" data-tippy-content="Kills" draggable="false">
                                                                <p class="mc-font color-white">Kills: </p>
                                                                <p class="mc-font">{{.GameStats.RS_Kills}}</p>
                                                            </div>
                                                            <div class="line-content2">
                                                                <img src="../img/mcc/games/stats/death.png" class="no-select" data-tippy-content="Deaths" draggable="false">
                                                                <p class="mc-font color-white">Deaths: </p>
                                                                <p class="mc-font">{{.GameStats.RS_Deaths}}</p>
                                                            </div>
                                                            <div class="line-content2">
                                                                <img src="../img/mcc/games/stats/{{if ge .GameStats.RS_KDR 0.5}}up{{else}}down{{end}}.png" class="no-select" data-tippy-content="(Kills per Death) Average - 0.5" draggable="false">
                                                                <p class="mc-font color-white">KDR: </p>
                                                                <p class="mc-font">({{.GameStats.RS_KDR}})</p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="subcath-body2">
                                                    <div class="subcath-header mc-font">
                                                        <img src="../img/mcc/games/dynaball.png" class="roll-icon no-select" draggable="false">
                                                        <p style="color: white;">Dynaball Stats</p>
                                                    </div> 
                                                    <div class="general-stats">
                                                        <div class="subcath-case">
                                                            <div class="line-content2">
                                                                <img src="../img/mcc/games/stats/win.png" class="no-select" data-tippy-content="Wins" draggable="false">
                                                                <p class="mc-font color-white">Wins: </p>
                                                                <p class="mc-font">{{.GameStats.DB_Wins}}</p>
                                                            </div>
                                                            <div class="line-content2">
                                                                <img src="../img/mcc/games/stats/lose.png" class="no-select" data-tippy-content="Loses" draggable="false">
                                                                <p class="mc-font color-white">Loses: </p>
                                                                <p class="mc-font">{{.GameStats.DB_Loses}}</p>
                                                            </div>
                                                            <div class="line-content2">
                                                                <img src="../img/mcc/games/stats/{{if ge .GameStats.DB_WLR 1.0}}up{{else}}down{{end}}.png" class="no-select" data-tippy-content="(Wins per Lose) Average - 1.0" draggable="false">
                                                                <p class="mc-font color-white">WLR: </p>
                                                                <p class="mc-font">({{.GameStats.DB_WLR}})</p>
                                                            </div>
                                                        </div>
                                                        <div class="subcath-case">
                                                            <div class="line-content2">
                                                                <img src="../img/mcc/games/stats/kill.png" class="no-select" data-tippy-content="Kills" draggable="false">
                                                                <p class="mc-font color-white">Kills: </p>
                                                                <p class="mc-font">{{.GameStats.DB_Kills}}</p>
                                                            </div>
                                                            <div class="line-content2">
                                                                <img src="../img/mcc/games/stats/death.png" class="no-select" data-tippy-content="Deaths" draggable="false">
                                                                <p class="mc-font color-white">Deaths: </p>
                                                                <p class="mc-font">{{.GameStats.DB_Deaths}}</p>
                                                            </div>
                                                            <div class="line-content2">
                                                                <img src="../img/mcc/games/stats/{{if ge .GameStats.DB_KDR 1.0}}up{{else}}down{{end}}.png" class="no-select" data-tippy-content="(Kills per Death) Average - 1.0" draggable="false">
                                                                <p class="mc-font color-white">KDR: </p>
                                                                <p class="mc-font">({{.GameStats.DB_KDR}})</p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    {{else}}
                                        <p>{{index .Translations .Lang "no_stats"}}</p>
                                    {{end}}
                                </div>
                            </div>
                            <!-- Cosmetics Roll -->
                            <div class="roll-card cosmetics-card" id="CosmeticsCard">
                                <div class="roll-header cosmetics-header cursor" onclick="toggleRoll('CosmeticsBody', 'cosmetics-arrow')">
                                    <img src="../img/mcc/utilities/theme.png" alt="Cosmetics Icon" class="roll-icon no-select" draggable="false">
                                    <h2>{{index .Translations .Lang "roll-cos"}}</h2>
                                    <img id="cosmetics-arrow" src="../img/mcc/utilities/arrow-left.png" alt="Arrow" class="arrow no-select">
                                </div>
                                <div class="roll-body" id="CosmeticsBody">
                                    {{if .Hats}}
                                        <div class="cos-selector">
                                            <button onclick="changeContent(this, 'equipped-content')" class="selected">
                                                <img src="../img/mcc/cos/Equipped.png" alt="Equipped" class="no-select" draggable="false">
                                                <span class="cos-text mc-font">Equipped</span>
                                            </button>
                                            <button onclick="changeContent(this, 'hats-content')">
                                                <img src="../img/mcc/cos/Hats.png" alt="Hats" class="no-select" draggable="false">
                                                <span class="cos-text mc-font">Hats</span>
                                            </button>
                                            <button onclick="changeContent(this, 'accessories-content')">
                                                <img src="../img/mcc/cos/Accessories.png" alt="Accessories" class="no-select" draggable="false">
                                                <span class="cos-text mc-font">Accessories</span>
                                            </button>
                                            <button onclick="changeContent(this, 'auras-content')">
                                                <img src="../img/mcc/cos/Auras.png" alt="Auras" class="no-select" draggable="false">
                                                <span class="cos-text mc-font">Auras</span>
                                            </button>
                                            <button onclick="changeContent(this, 'trails-content')">
                                                <img src="../img/mcc/cos/Trails.png" alt="Trails" class="no-select" draggable="false">
                                                <span class="cos-text mc-font">Trails</span>
                                            </button>
                                            <button onclick="changeContent(this, 'backs-content')">
                                                <img src="../img/mcc/cos/Backs.png" alt="Backs" class="no-select" draggable="false">
                                                <span class="cos-text mc-font">Cloaks</span>
                                            </button>
                                            <button onclick="changeContent(this, 'fishing-content')">
                                                <img src="../img/mcc/cos/Fishing_Rods.png" alt="Fishing Rods" class="no-select" draggable="false">
                                                <span class="cos-text mc-font">Fishing Rods</span>
                                            </button>
                                        </div>
                                        <div class="cos-display-box">
                                            <div id="equipped-content" class="cos-allcontents content active">
                                                <img src="../img/mcc/cos/invs/Equipped.png" class="cos-case-header no-select" draggable="false">
                                                <div class="cos-equipped-content">
                                                    <div class="equip-left equip-cases">
                                                        <div class="inv-case">
                                                            {{if .Equipped.Hats.Name}}
                                                                <img src="../img/mcc/cos/hats/{{.Equipped.Hats.Name}}.gif" onerror="this.onerror=null; this.src='../img/mcc/cos/hats/NoTexture.gif';" class="inv-item no-select" data-tippy-content="<div style='text-align:start;'><b>{{.Equipped.Hats.RealName}}</b><br><img src='../img/mcc/tooltip/{{.Equipped.Hats.Rarity}}.png' height='17' class='pixelated' style='margin-right: 3px;'><img src='../img/mcc/tooltip/hat.png' height='17' class='pixelated'></div>" data-theme="{{.Equipped.Hats.Rarity}}" draggable="false">
                                                            {{else}}
                                                                <img src="../img/mcc/cos/hats/None.gif" class="inv-item no-select" data-tippy-content="None" data-theme="COMMON" draggable="false">
                                                            {{end}}
                                                        </div>                                                    
                                                        <div class="inv-case">
                                                            {{if .Equipped.Accessories.Name}}
                                                                <img src="../img/mcc/cos/accessories/{{.Equipped.Accessories.Name}}.gif" onerror="this.onerror=null; this.src='../img/mcc/cos/accessories/NoTexture.gif';" class="inv-item no-select" data-tippy-content="<div style='text-align:start;'><b>{{.Equipped.Accessories.RealName}}</b><br><img src='../img/mcc/tooltip/{{.Equipped.Accessories.Rarity}}.png' height='17' class='pixelated' style='margin-right: 3px;'><img src='../img/mcc/tooltip/accessory.png' height='17' class='pixelated'></div>" data-theme="{{.Equipped.Accessories.Rarity}}" draggable="false">
                                                            {{else}}
                                                                <img src="../img/mcc/cos/accessories/None.gif" class="inv-item no-select" data-tippy-content="None" data-theme="COMMON" draggable="false">
                                                            {{end}}
                                                        </div>
                                                        <div class="inv-case">
                                                            {{if .Equipped.Auras.Name}}
                                                                <img src="../img/mcc/cos/auras/{{.Equipped.Auras.Name}}.gif" onerror="this.onerror=null; this.src='../img/mcc/cos/auras/NoTexture.gif';" class="inv-item no-select" data-tippy-content="<div style='text-align:start;'><b>{{.Equipped.Auras.RealName}}</b><br><img src='../img/mcc/tooltip/{{.Equipped.Auras.Rarity}}.png' height='17' class='pixelated' style='margin-right: 3px;'><img src='../img/mcc/tooltip/aura.png' height='17' class='pixelated'></div>" data-theme="{{.Equipped.Auras.Rarity}}" draggable="false">
                                                            {{else}}
                                                                <img src="../img/mcc/cos/auras/None.gif" class="inv-item no-select" data-tippy-content="None" data-theme="COMMON" draggable="false">
                                                            {{end}}
                                                        </div>
                                                    </div>
                                                    <div class="equip-center equip-cases">
                                                        <img src="../img/mcc/cos/invs/profile.png" class="cos-profile no-select" draggable="false">
                                                        <img src="https://mc-heads.net/avatar/{{.Name}}" class="cos-head-overlay no-select" data-tippy-content="{{.Name}}" draggable="false">
                                                        <img src="../img/mcc/crowns/{{if .Evolution}}{{.Evolution}}{{else}}0{{end}}.png" class="cos-crown-overlay no-select" data-tippy-content="Level {{.CrownLevel}}" draggable="false">
                                                    </div>
                                                    <div class="equip-right equip-cases">
                                                        <div class="inv-case">
                                                            {{if .Equipped.Trails.Name}}
                                                                <img src="../img/mcc/cos/trails/{{.Equipped.Trails.Name}}.gif" onerror="this.onerror=null; this.src='../img/mcc/cos/trails/NoTexture.gif';" class="inv-item no-select" data-tippy-content="<div style='text-align:start;'><b>{{.Equipped.Trails.RealName}}</b><br><img src='../img/mcc/tooltip/{{.Equipped.Trails.Rarity}}.png' height='17' class='pixelated' style='margin-right: 3px;'><img src='../img/mcc/tooltip/trail.png' height='17' class='pixelated'></div>" data-theme="{{.Equipped.Trails.Rarity}}" draggable="false">
                                                            {{else}}
                                                                <img src="../img/mcc/cos/trails/None.gif" class="inv-item no-select" data-tippy-content="None" data-theme="COMMON" draggable="false">
                                                            {{end}}
                                                        </div>
                                                        <div class="inv-case">
                                                            {{if .Equipped.Backs.Name}}
                                                                <img src="../img/mcc/cos/backs/{{.Equipped.Backs.Name}}.gif" onerror="this.onerror=null; this.src='../img/mcc/cos/backs/NoTexture.gif';" class="inv-item no-select" data-tippy-content="<div style='text-align:start;'><b>{{.Equipped.Backs.RealName}}</b><br><img src='../img/mcc/tooltip/{{.Equipped.Backs.Rarity}}.png' height='17' class='pixelated' style='margin-right: 3px;'><img src='../img/mcc/tooltip/cloak.png' height='17' class='pixelated'></div>" data-theme="{{.Equipped.Backs.Rarity}}" draggable="false">
                                                            {{else}}
                                                                <img src="../img/mcc/cos/backs/None.gif" class="inv-item no-select" data-tippy-content="None" data-theme="COMMON" draggable="false">
                                                            {{end}}
                                                        </div>
                                                        <div class="inv-case">
                                                            {{if .Equipped.Rods.Name}}
                                                                <img src="../img/mcc/cos/fishing_rod/{{.Equipped.Rods.Name}}.gif" onerror="this.onerror=null; this.src='../img/mcc/cos/fishing_rod/NoTexture.gif';" class="inv-item no-select" data-tippy-content="<div style='text-align:start;'><b>{{.Equipped.Rods.RealName}}</b><br><img src='../img/mcc/tooltip/{{.Equipped.Rods.Rarity}}.png' height='17' class='pixelated' style='margin-right: 3px;'><img src='../img/mcc/tooltip/rod.png' height='17' class='pixelated'></div>" data-theme="{{.Equipped.Rods.Rarity}}" draggable="false">
                                                            {{else}}
                                                                <img src="../img/mcc/cos/fishing_rod/None.gif" class="inv-item no-select" data-tippy-content="None" data-theme="COMMON" draggable="false">
                                                            {{end}}
                                                        </div>
                                                    </div>
                                                </div>
                                                <img src="../img/mcc/cos/invs/Equipped_Bottom.png" class="cos-case-downer no-select" draggable="false">
                                            </div>
                                            <div id="hats-content" class="cos-allcontents content hidden">
                                                <img src="../img/mcc/cos/invs/Hats.png" class="cos-case-header no-select" draggable="false">
                                                <div class="cos-inventory">
                                                    <div class="left">
                                                        <img src="../img/mcc/utilities/arrow-left-off.png" class="page-arrow no-select" id="arrow-left-hats" draggable="false">
                                                    </div>
                                                    <div class="mid" id="hats-container">
                                                        <!-- Les hats seront insérés ici via JS -->
                                                    </div>
                                                    <div class="right">
                                                        <img src="../img/mcc/utilities/arrow-right-off.png" class="page-arrow no-select" id="arrow-right-hats" draggable="false">
                                                    </div>
                                                </div>
                                                <img src="../img/mcc/cos/invs/Hats_Bottom.png" class="cos-case-downer no-select" draggable="false">
                                            </div>
                                            <div id="accessories-content" class="cos-allcontents content hidden">
                                                <img src="../img/mcc/cos/invs/Accessories.png" class="cos-case-header no-select" draggable="false">
                                                <div class="cos-inventory">
                                                    <div class="left">
                                                        <img src="../img/mcc/utilities/arrow-left-off.png" class="page-arrow no-select" id="arrow-left-accessories" draggable="false">
                                                    </div>
                                                    <div class="mid" id="accessories-container">
                                                        <!-- Les accessories seront insérés ici via JS -->
                                                    </div>
                                                    <div class="right">
                                                        <img src="../img/mcc/utilities/arrow-right-off.png" class="page-arrow no-select" id="arrow-right-accessories" draggable="false">
                                                    </div>
                                                </div>
                                                <img src="../img/mcc/cos/invs/Accessories_Bottom.png" class="cos-case-downer no-select" draggable="false">
                                            </div>
                                            <div id="auras-content" class="cos-allcontents content hidden">
                                                <img src="../img/mcc/cos/invs/Auras.png" class="cos-case-header no-select" draggable="false">
                                                <div class="cos-inventory">
                                                    <div class="left">
                                                        <img src="../img/mcc/utilities/arrow-left-off.png" class="page-arrow no-select" id="arrow-left-auras" draggable="false">
                                                    </div>
                                                    <div class="mid" id="auras-container">
                                                        <!-- Les auras seront insérées ici via JS -->
                                                    </div>
                                                    <div class="right">
                                                        <img src="../img/mcc/utilities/arrow-right-off.png" class="page-arrow no-select" id="arrow-right-auras" draggable="false">
                                                    </div>
                                                </div>
                                                <img src="../img/mcc/cos/invs/Auras_Bottom.png" class="cos-case-downer no-select" draggable="false">
                                            </div>
                                            <div id="trails-content" class="cos-allcontents content hidden">
                                                <img src="../img/mcc/cos/invs/Trails.png" class="cos-case-header no-select" draggable="false">
                                                <div class="cos-inventory">
                                                    <div class="left">
                                                        <img src="../img/mcc/utilities/arrow-left-off.png" class="page-arrow no-select" id="arrow-left-trails" draggable="false">
                                                    </div>
                                                    <div class="mid" id="trails-container">
                                                        <!-- Les trails seront insérés ici via JS -->
                                                    </div>
                                                    <div class="right">
                                                        <img src="../img/mcc/utilities/arrow-right-off.png" class="page-arrow no-select" id="arrow-right-trails" draggable="false">
                                                    </div>
                                                </div>
                                                <img src="../img/mcc/cos/invs/Trails_Bottom.png" class="cos-case-downer no-select" draggable="false">
                                            </div>                                                                               
                                            <div id="backs-content" class="cos-allcontents content hidden">
                                                <img src="../img/mcc/cos/invs/Backs.png" class="cos-case-header no-select" draggable="false">
                                                <h2>Cloaks</h2>
                                                <p>{{index .Translations .Lang "coming_soon"}}</p>
                                                <p>{{index .Translations .Lang "api_not_working"}}</p>
                                                <img src="../img/mcc/cos/invs/Backs_Bottom.png" class="cos-case-downer no-select" draggable="false">
                                            </div>
                                            <div id="fishing-content" class="cos-allcontents content hidden">
                                                <img src="../img/mcc/cos/invs/Fishing_Rods.png" class="cos-case-header no-select" draggable="false">
                                                <h2>Rods</h2>
                                                <p>{{index .Translations .Lang "coming_soon"}}</p>
                                                <p>{{index .Translations .Lang "api_not_working"}}</p>
                                                <img src="../img/mcc/cos/invs/Fishing_Rods_Bottom.png" class="cos-case-downer no-select" draggable="false">
                                            </div>
                                        </div>
                                    {{else}}
                                        <p>{{index .Translations .Lang "no_cos"}}</p>
                                    {{end}}
                                </div>                           
                            </div>
                            <!-- Fishs Roll -->
                            <div class="roll-card fishs-card" id="FishsCard">
                                <div class="roll-header fishs-header cursor" onclick="toggleRoll('FishsBody', 'fishs-arrow')">
                                    <img src="../img/mcc/fishing/fish/verdant_woods/forest_cod.png" alt="Fishs Icon" class="roll-icon no-select" draggable="false">
                                    <h2>{{index .Translations .Lang "roll-fishing"}}</h2>
                                    <img id="fishs-arrow" src="../img/mcc/utilities/arrow-left.png" alt="Arrow" class="arrow no-select">
                                </div>
                                <div class="roll-body" id="FishsBody">
                                    <p>{{index .Translations .Lang "coming_soon"}}</p>
                                </div>
                            </div>  
                        </div>
                    </div>
                </div>
                <!-- Hypixel Stats Card -->
                <div class="hypixelstats-card" id="hypixelStatsCard">
                    <div class="stats-header">
                        <img src="../img/utilities/hypixelicon.png" alt="Hypixel Icon" class="hypixel-icon">
                        <h2>Hypixel Stats</h2>
                    </div>
                    <div class="stats-body">
                        <p id="hypixelStats">{{index .Translations .Lang "coming_soon"}}</p>
                    </div>
                </div>
            </div>
            <!-- Modal -->
            <div id="myModal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <img src="../img/capes/NoTexture.png" alt="Image" class="modal-image no-select" draggable="false">
                    </div>
                    <div class="modal-body">
                        <p class="modal-name">Name PlaceHolder</p>
                        <p class="modal-date">Date PlaceHolder</p>
                        <p class="modal-desc">Description PlaceHolder</p>
                        <div class="modal-images no-select" style="display: block;">
                            <img src="../img/capes/NoTexture.png" title="Default Title" alt="Default Alt" class="modal-image-item no-select" id="modalImage1" draggable="false">
                        </div>
                    </div>
                </div>
            </div>
            <div id="loadingOverlay" class="loadingOverlay">
                <img src="../img/utilities/loading.gif" class="loadingGif" alt="Loading..." id="loadingGif" draggable="false">
            </div>
        </main>
        <script src="../js/scroll.js"></script>
        <script src="../js/modal.js"></script>
        <script src="../js/cos.js"></script>
        <script src="../js/friends.js"></script>
        <script src="../js/sounds.js"></script>
        <script src="../js/loading.js"></script>
        <script src="https://cdn.canvasjs.com/canvasjs.min.js"></script>
        <script src ="https://unpkg.com/@popperjs/core@2/dist/umd/popper.min.js"></script>
        <script src ="https://unpkg.com/tippy.js@6/dist/tippy-bundle.umd.js"></script>
        <script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
        <script>
            function searchPlayer(element) {
                var playerName = element.getAttribute('data-playername'); // Récupère le nom du joueur
                var lang = "{{.Lang}}"; // Récupère la langue actuelle

                // Récupérer l'URL de base dynamiquement sans hardcoder localhost
                var baseUrl = window.location.origin; 

                // Redirection vers l'URL du joueur comme le ferait le formulaire
                window.location.href = `${baseUrl}/${lang}/menu?q=${playerName}`;
                document.getElementById("loadingOverlay").style.display = "flex";
                setTimeout(function() {
                    document.getElementById("loadingOverlay").style.display = "none";
                }, 5000);
            }

            function generateTooltipContent(item, itemType) {
                let tooltipContent = `<div style='text-align:start;'>${item.RealName}<br><img src='../img/mcc/tooltip/${item.Rarity}.png' height='17' class='pixelated' style='margin-right: 3px;'><img src='../img/mcc/tooltip/${itemType}.png' height='17' class='pixelated'></div>`;

                const trophyType = item.IsBonusTrophies ? "Bonus Trophies" : "Style Trophies";
                const trophyIcon = item.IsBonusTrophies ? 'bonus_trophies.png' : 'style_trophies.png';
                
                const trophyColor = item.Owned ? "#00FF00" : "var(--abs-white)";

                tooltipContent += `<div style="display: flex; align-items: center; gap: 5px;">
                    <span style="color: var(--text-grey-2);">${trophyType}:</span> 
                    <img src='../img/mcc/trophies/${trophyIcon}' height='17' class='pixelated'>
                    <span style="color: ${trophyColor};">${item.Trophies}</span>
                </div>`;

                if (!item.Owned) {
                    tooltipContent += `<br><img src='../img/mcc/utilities/left-click.png' height='17' class='pixelated' style='margin-right: -4px; margin-bottom: -2px;'> 
                                    <span style="color: var(--mctext-§8);">></span> 
                                    <span style="color: var(--mctext-yellow1);">Left-Click to</span> 
                                    <span style="color: var(--mctext-yellow2);">preview</span>`;
                }

                return tooltipContent;
            }
            function displayItems(items, containerId, arrowLeftId, arrowRightId, pageSize = 35) {
                let currentPage = 0;
                let totalPages = Math.ceil(items.length / pageSize);
        
                function updateDisplay() {
                    let start = currentPage * pageSize;
                    let end = start + pageSize;
                    let pageItems = items.slice(start, end);
        
                    let container = document.getElementById(containerId);
                    container.innerHTML = ""; // Réinitialiser le contenu
        
                    let row = null;
                    let lastUnlockedItem = null; // Variable pour suivre l'élément déverrouillé
        
                    pageItems.forEach((item, index) => {
                        if (index % 7 === 0) {
                            row = document.createElement("div");
                            row.classList.add("line");
                            container.appendChild(row);
                        }
        
                        let itemDiv = document.createElement("div");
                        itemDiv.classList.add("inv-case2");
        
                        let img = document.createElement("img");
                        img.classList.add("inv-item", "no-select");
        
                        let basePath = "";
                        let tooltipContent = "";
                        let tooltipTheme = "";
                        let itemType = "";
                        
                        if (containerId.toLowerCase() === "auras-container") {
                            basePath = "../img/mcc/cos/auras/";
                            itemType = "aura";
                        } else if (containerId.toLowerCase() === "hats-container") {
                            basePath = "../img/mcc/cos/hats/";
                            itemType = "hat";
                        } else if (containerId.toLowerCase() === "accessories-container") {
                            basePath = "../img/mcc/cos/accessories/";
                            itemType = "accessory";
                        } else if (containerId.toLowerCase() === "trails-container") {
                            basePath = "../img/mcc/cos/trails/";
                            itemType = "trail";
                        }

                        tooltipContent = generateTooltipContent(item, itemType);
        
                        tooltipTheme = item.Rarity;
        
                        if (item && item.Owned) {
                            img.src = `${basePath}${item.Name}.gif`;
                            img.onerror = function () {
                                this.src = `${basePath}NoTexture.gif`;
                            };
                        } else {
                            img.src = "../img/mcc/cos/invs/lock.png";
                            img.classList.add("cursor");
                        }
        
                        img.setAttribute("data-tippy-content", tooltipContent);
                        img.setAttribute("data-theme", tooltipTheme);
                        img.setAttribute("draggable", "false");
                        itemDiv.appendChild(img);

                        const equippedItems = {
                            hat: "{{.Equipped.Hats.Name}}",
                            accessory: "{{.Equipped.Accessories.Name}}",
                            aura: "{{.Equipped.Auras.Name}}",
                            trail: "{{.Equipped.Trails.Name}}"
                        };

                        if (item.Name === equippedItems[itemType]) {
                            let overlay = document.createElement("img");
                            overlay.src = "../img/mcc/utilities/layers/Selected.png";
                            overlay.classList.add("equipped-overlay");
                            itemDiv.appendChild(overlay);
                        }
        
                        img.addEventListener("click", function () {
                            if (item && !item.Owned) {      
                                playUiClickSound();
                                if (lastUnlockedItem && lastUnlockedItem !== img) {
                                    lastUnlockedItem.src = "../img/mcc/cos/invs/lock.png";
                                    lastUnlockedItem.setAttribute("data-locked", "false");
                                }
        
                                if (img.getAttribute("data-locked") === "true") {
                                    img.src = "../img/mcc/cos/invs/lock.png";
                                    img.setAttribute("data-locked", "false");
                                    lastUnlockedItem = null;
                                } else {
                                    img.src = `${basePath}${item.Name}.gif`;
                                    img.onerror = function () {
                                        this.src = `${basePath}NoTexture.gif`;
                                    };
                                    img.setAttribute("data-locked", "true");
                                    lastUnlockedItem = img;
                                }
                            }
                        });
        
                        itemDiv.appendChild(img);
                        row.appendChild(itemDiv);
                    });
        
                    while (pageItems.length < pageSize) {
                        if (pageItems.length % 7 === 0) {
                            row = document.createElement("div");
                            row.classList.add("line");
                            container.appendChild(row);
                        }
        
                        let emptyDiv = document.createElement("div");
                        emptyDiv.classList.add("inv-case2");
                        row.appendChild(emptyDiv);
                        pageItems.push(null);
                    }

                    let leftArrow = document.getElementById(arrowLeftId);
                    let rightArrow = document.getElementById(arrowRightId);
            
                    if (currentPage > 0) {
                        leftArrow.classList.add("cursor");
                    } else {
                        leftArrow.classList.remove("cursor");
                    }
            
                    if (currentPage < totalPages - 1) {
                        rightArrow.classList.add("cursor");
                    } else {
                        rightArrow.classList.remove("cursor");
                    }
        
                    document.getElementById(arrowLeftId).src = currentPage > 0 
                        ? "../img/mcc/utilities/arrow-left.png" 
                        : "../img/mcc/utilities/arrow-left-off.png";
        
                    document.getElementById(arrowRightId).src = currentPage < totalPages - 1 
                        ? "../img/mcc/utilities/arrow-right.png" 
                        : "../img/mcc/utilities/arrow-right-off.png";
                    
                    document.getElementById(arrowLeftId).setAttribute("draggable", "false");
                    document.getElementById(arrowRightId).setAttribute("draggable", "false");

                    tippy("[data-tippy-content]", {
                        hideOnClick: false,
                        duration: 200,
                        allowHTML: true,
                        onShow(instance) {
                            const theme = instance.reference.getAttribute("data-theme") || "default";
                            instance.popper.querySelector('.tippy-box').setAttribute("data-theme", theme);
                        }
                    });
                }
        
                document.getElementById(arrowLeftId).addEventListener("click", () => {
                    if (currentPage > 0) {
                        currentPage--;
                        updateDisplay();
                        playUiClickSound();
                    }
                });
        
                document.getElementById(arrowRightId).addEventListener("click", () => {
                    if (currentPage < totalPages - 1) {
                        currentPage++;
                        updateDisplay();
                        playUiClickSound();
                    }
                });
        
                updateDisplay();
            }
        
            let auras = {{ .Auras }};
            displayItems(auras, "auras-container", "arrow-left-auras", "arrow-right-auras");
        
            let hats = {{ .Hats }};
            displayItems(hats, "hats-container", "arrow-left-hats", "arrow-right-hats");
        
            let accessories = {{ .Accessories }};
            displayItems(accessories, "accessories-container", "arrow-left-accessories", "arrow-right-accessories");
        
            let trails = {{ .Trails }};
            displayItems(trails, "trails-container", "arrow-left-trails", "arrow-right-trails");
        </script>                        
        <script>
            function redirectToRankPage(rankPage) {
                window.location.href = "/{{.Lang}}/classement/" + rankPage;
                document.getElementById("loadingOverlay").style.display = "flex";
                setTimeout(function() {
                    document.getElementById("loadingOverlay").style.display = "none";
                }, 5000);
            }
            function refreshSearch() {
                window.location.href = "/{{.Lang}}/menu"
                document.getElementById("loadingOverlay").style.display = "flex";
                setTimeout(function() {
                    document.getElementById("loadingOverlay").style.display = "none";
                }, 5000);
            }
            tippy("[data-tippy-content]", {
                duration: 200,
                allowHTML: true,
                onShow(instance) {
                    const theme = instance.reference.getAttribute("data-theme") || "default";
                    instance.popper.querySelector('.tippy-box').setAttribute("data-theme", theme);
                }
            });
            window.onload = function () {
                var chart = new CanvasJS.Chart("GamesGraph", {
                    backgroundColor: "transparent",
                    theme: "dark2",
                    data: [{
                        type: "pie",
                        startAngle: 60,
                        toolTipContent: "<b>{label}</b>: {y} Games",
                        radius: 100,
                        dataLabels: {
                            fontColor: "white" // Couleur du texte des segments en blanc
                        },
                        dataPoints: [
                            { y: '{{.GameStats.SBGames}}', label: "Sky Battle" },
                            { y: '{{.GameStats.BBGames}}', label: "Battle Box" },
                            { y: '{{.GameStats.TGTTOSGames}}', label: "TGTTOS" },
                            { y: '{{.GameStats.HITWGames}}', label: "Hole in the wall" },
                            { y: '{{.GameStats.RSGames}}', label: "Rocket Spleef Rush" },
                            { y: '{{.GameStats.DBGames}}', label: "Dynaball" },
                            { y: '{{.GameStats.PWSGames}}', label: "Parkour Survivor" }
                        ]
                    }],
                });
                chart.render();
            }
        </script>
    </body>
</html>
